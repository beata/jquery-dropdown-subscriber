/*! dropdownsubscriber - v0.1.0 - 2013-09-30
* https://github.com/beata/dropdownsubscriber
* Copyright (c) 2013 Beata Lin; Licensed MIT */
(function(e){var a={};"object"==typeof QUnit&&(e._DropdownSubscriber=a),e.extend(a,{backupDefaultValue:function(){var a=e(this);a.data("defaultValue",a.val())},restoreDefaultValue:function(){var a=e(this);a.val(a.data("defaultValue"))},setValue:function(a){return function(){var r=e(this);r.val(a)}},subscribe:function(){var r=e(e(this).data("dropdownSubscriber")),u=r.data("subscribers")||[];u.push(this),r.data("subscribers",u).addClass("js-dropdown-subscriber-dropdown"),a.backupDefaultValue.call(this)},dropdownChange:function(){var r=e(this),u=r.data("subscribers")||[],t=r.find("option:selected");return u.length&&t.length?t.val()+""==r.data("defaultValue")+""?(e.each(u,a.restoreDefaultValue),null):(e.each(u,a.setValue(t.data("publishValue"))),null):null}}),e.dropdownSubscriber={init:function(){e("input[data-dropdown-subscriber], select[data-dropdown-subscriber]").each(a.subscribe),e("select.js-dropdown-subscriber-dropdown").dropdownSubscriber()}},e.fn.dropdownSubscriber=function(){return this.each(a.backupDefaultValue).on("change.dropdownSubscriber",a.dropdownChange)},e.dropdownSubscriber.init()})(jQuery);